<div class="container mt-3">
    <h2>Agregar Producto</h2>
    <div class="">
        <form [formGroup]="formProducts">
            <div class="row">
                <div class="col-md-6">

                    <div class="mt-3">
                        <label class="form-label">Nombre</label>
                        <input type="text" class="form-control" formControlName="name" [ngClass]="{ 'is-invalid': name?.invalid && name?.touched }">
                       
                    </div>
                    <div *ngIf="name?.touched && name?.hasError" class="danger text-danger">
                        <span *ngIf="name?.getError('required')"> El nombre del producto es requerido</span>
                        <span *ngIf="name?.getError('maxlength')"> El nombre del producto no debe ser mayor a 50
                            caracteres</span>
                        <span *ngIf="name?.getError('minlength')"> El nombre del producto debe tener un nombre de al menos 3
                            caracteres</span>
                    </div>


                    <div class="mt-3">
                        <label class="form-label">Descripcion</label>
                        <textarea type="text" class="form-control" formControlName="description" [ngClass]="{ 'is-invalid': description?.invalid && description?.touched }"></textarea>
                        
                    </div>
                    <div *ngIf="description?.touched && description?.hasError" class="danger text-danger">
                        <span *ngIf="description?.getError('required')"> La descripcion del producto es requerida</span>
                        <span *ngIf="description?.getError('maxlength')">La descripcion del producto no debe ser mayor a 200
                            caracteres</span>
                        <span *ngIf="description?.getError('minlength')">La descripcion del producto debe tener al menos 5
                            caracteres</span>
                    </div>


                    <div class="mt-3">
                        <label class="form-label">Categoria</label>
                        <select class="form-select" formControlName="category" [ngClass]="{ 'is-invalid': category?.invalid && category?.touched }">
                            <option selected disabled>Seleccione una categoria</option>
                            <option *ngFor="let category of categories" value="{{category.id}}">{{category.name}}</option>
                        </select>
                    </div>
                    <div *ngIf="category?.touched && category?.hasError" class="danger text-danger">
                        <span *ngIf="category?.getError('required')">Seleccione la categoria del producto</span>
                    </div>
                    


                    <div class="mt-3">
                        <label class="form-label">Proveedor</label>
                        <select class="form-select" formControlName="supplier" [ngClass]="{ 'is-invalid': supplier?.invalid && supplier?.touched }">
                            <option selected disabled>Seleccione una proveedor</option>
                            <option *ngFor="let supplier of suppliers" value="{{supplier.id}}"> {{supplier.name}}</option>
                        </select>
                    </div>
                    <div *ngIf="supplier?.touched && supplier?.hasError" class="danger text-danger">
                        <span *ngIf="supplier?.getError('required')">Seleccione el proveedor del producto</span>
                    </div>
                  

                </div>
                <div class="col-md-6">


                    <div class="mt-3">
                        <label class="form-label">Imagen</label>
                        <ngx-dropzone (change)="onSelect($event)">
                            <ngx-dropzone-label>Agregar Imagen</ngx-dropzone-label>
                            <ngx-dropzone-preview *ngFor="let f of files" [removable]="true" (removed)="onRemove(f)">
                                <ngx-dropzone-label>{{ f.name }} ({{ f.type }})</ngx-dropzone-label>
                            </ngx-dropzone-preview>
                        </ngx-dropzone>
                        <ngx-dropzone-image-preview ngProjectAs="ngx-dropzone-preview" *ngFor="let f of files"
                            [file]="f">
                            <ngx-dropzone-label>{{ f.name }} ({{ f.type }})</ngx-dropzone-label>
                        </ngx-dropzone-image-preview>

                        <div class="mt-3">
                            <label class="form-label">Precio</label>
                            <input type="text" class="form-control" formControlName="price" [ngClass]="{ 'is-invalid': price?.invalid && price?.touched }">
                        </div>
                        <div *ngIf="price?.touched && price?.hasError" class="danger text-danger">
                            <span *ngIf="price?.getError('required')"> El precio del producto es requerido</span>
                         
                            <span *ngIf="price?.getError('min')">El precio del producto debe ser mayor a $0</span>
                        </div>


                        <div class="mt-3">
                            <label class="form-label">Stock</label>
                            <input type="text" class="form-control" formControlName="stock" [ngClass]="{ 'is-invalid': stock?.invalid && stock?.touched }">
                        </div>
                        <div *ngIf="stock?.touched && stock?.hasError" class="danger text-danger">
                            <span *ngIf="stock?.getError('required')"> El precio del producto es requerido</span>
                         
                            <span *ngIf="stock?.getError('min')">El precio del producto debe ser mayor a $0</span>
                        </div>
                    </div>
                </div>
            </div>
        </form>
        <div class="text-end mt-3">
            <button class="btn btn-secondary mx-2" (click)="backToProducts()">Volver</button>
            <button class="btn btn-primary mx-2" (click)="sumbit()">Confirmar</button>
        </div>
    </div>

</div>